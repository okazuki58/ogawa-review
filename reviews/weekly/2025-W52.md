# 2025-W52 週次振り返り

**期間**: 2025年12月22日（月）〜 2025年12月26日（金）

※ 12月22日と12月26日のログは記録なし。実質的には12月23日（月）〜12月25日（水）の3日間のログから振り返りを作成。

---

## Be hungry（貪欲になれ）

### 技術学習・新技術適用

**maclogger 開発（12/23）**
- Vision OCRを導入し、スクリーンショットからテキスト抽出する機能を実装
- 1分間隔でアクティブウィンドウをキャプチャし、activity_*.jsonl に記録する仕組みを構築
- /tmp/macLogger_screenshot.png に一時保存して自動削除される挙動を確認

**テスト基盤整備（12/23）**
- Jest によるユニットテスト整備：atoyoro で全25テストが成功、カバレッジ向上
- Playwright E2E テスト導入：個別ケース 5/5 pass、統合テスト 15/15 成功を達成
- GTR（git-worktree-runner）を導入し動作確認

**Weaviate（ベクトル検索）精度検証（12/24）**
- 全組合せ（約14,190通り）で類似案件検索の精度検証を実施
- LLM を使わない全パターン評価でカバレッジ／漏れ／超過を算出
- Weaviate 上位 Top3 と比較し、カバレッジの差（Top 約82.6% vs Weaviate 約52.2%）を確認
- ベクトル検索単体では見積項目カバレッジ観点で十分な精度が得られないことを明確化
- Elasticsearch/Algolia 等のキーワード検索導入またはハイブリッド検索を提案

**Slack API 学習（12/25）**
- Slack API（events, im:history/im:read スコープ、OAuthフロー、ngrok開発フロー等）を調査
- Bot トークンと User トークンの制約を確認し、DM 完全集約の実装方針を検討

**Claude Code カスタムスキル開発（12/25）**
- goal-management カスタムスキル設計とプロトタイプ作成
- grades.md/values.md/templates.md 等のテンプレートを整備
- G2→G3（自走可能）に向けた目標設定フローの試作

### アウトプット

**Atoyoro 資料作成（12/24）**
- ビジネス向け／技術向けスライド（全12枚）用に Gemini プロンプトと構成プランを作成

---

## Be an owner（当事者たれ）

### タスク完了・責任完遂

**maclogger 開発（12/23）**
- 要約仕様を変更：hourly summary や LLM送信時のトリミングを廃止し、全文送信に変更
- 常駐化の運用を変更：launchd(plist)/インストーラ案を作成したが macOS の制約で断念し、screen を使う方式に切替
- start/stop スクリプトを追加して安定的なバックグラウンド実行方法を整備
- maclogger 用 GitHub リポジトリを作成、初回コミット/push を実施
- 日報自動生成処理を切り出し：generate_report.py / generate_report.sh を追加
- スクリプト類を scripts/、Python コードを src/ に整理
- Makefile（setup/start/stop/report 等）を追加して操作を簡略化

**atoyoro テスト整備（12/23）**
- 統合テスト実装計画の策定：jest.integration.config.js / jest.integration.setup.js / .env.test の作成
- docker-compose に postgres-test を追加
- package.json に統合テスト実行スクリプトを追加
- E2E テスト実行・デバッグ：ローカルポート競合対応、headless:false にして可視デバッグ
- Jest 側の統合テスト整備：認証バイパス、OpenAI/Weaviate モック、prisma マイグレーション対応
- PR 作成→マージ→作業用ワークツリーのクリーンアップを実施

**Weaviate 検証実装（12/24）**
- TypeScript スクリプトを多数編集（complete-similarity-test.ts、batch-validate.ts、item-extractor 等）
- Node/tsx のモジュール解決エラー（ERR_INVALID_URL_SCHEME）、weaviate-ts-client の import 周り、p-limit の ESM 問題を調査・修正
- 実行フローを修正：Weaviate 検索結果を JSON に保存する方式へ変更
- 並列度を 20→100→500 に引き上げ
- 検証結果を Confluence／Slack に投稿し、ハイブリッド検索を提案
- index-weaviate.ts から Postgres/Prisma 関連コードを完全削除し、Weaviate のみ動作するように変更

**Atoyoro 見積案件作成（12/24）**
- 「産総研 安全科学講演会」向け見積案件を Atoyoro アプリで新規作成
- 開催日時、会場、参加人数=100、開催形式、予算=200万円等を入力
- 見積仕様に配信要件（Microsoft Teams 等）、機材、現地下見、遠隔登壇切替項目を反映

**Slack DM 集約ボット開発（12/25）**
- 開発環境構築：Cursor/VSCode でプロジェクト作成、.env/.env.example、ngrok導入、docker-compose で Postgres 用意、Prisma 採用
- Express で server.js 実装（raw body保存、Slack署名検証、POST /slack/events の URL検証・イベント処理→DB保存）を完了
- ngrok経由で Slack からの POST 受信・「メッセージ保存成功」を確認
- 実装を GitHub へ push

**xincere-review システム設計（12/25）**
- ogawa-profile と profile-builder スキル方針決定
- プロジェクト構築プラン作成（目標の半期→月次→週次→日次の自動分解、達成度チェック・Fix提案フロー）
- 外部連携設定検討（Google Cloud OAuth クライアント作成、スプレッドシートID/.env例準備）
- 公開方法は GitHub Pages を第一候補で確定

### チーム貢献

**ドキュメント整備・共有（12/23）**
- Slack/Confluence で進捗共有
- GTR.md、git-workflow、pr-guidelines、pull-request-template などを整備
- リモートを xincere-inc に切替え関連 PR を作成

**展示会・社内定例参加（12/24-25）**
- 展示会の Sync ミーティング（Google Meet）に参加して WBS 等を確認
- 社内定例参加（展示会出展/採用/勤怠等の共有）
- Confluence上の脆弱性指摘ページを確認（平文パスワード・認証情報のGit管理等）

**キャッチコピーのフィードバック対応（12/25）**
- 展示会用キャッチコピーのフィードバックを受領（「3秒ルール」「約15文字」「中央に『AI』配置」等）
- キャッチコピー候補を6案提示し、改定案を #04_bizdev_見積書エージェントと Confluence へ投稿・共有

---

## Be sustainable（継続的であれ）

### ドキュメント化

**maclogger（12/23）**
- README／動作説明の修正（1分ごとのログ、1時間ごとのLLM要約の表記修正）
- 常駐実行の安定化（screen + start/stop スクリプト）の README 反映

**atoyoro（12/23）**
- Git ワークフロー整備（.cursor/rules/git-workflow.mdc）
- PRルール・テンプレートの作成・更新
- GTR.md、git-workflow、pr-guidelines、pull-request-template などを整備

**Slack DM 集約ボット（12/25）**
- 仕様書 slack-dm-aggregator-spec.md を作成／更新（DBスキーマ、イベント受信フロー、トークン管理／セキュリティ要件を記載）
- Confluence へ仕様書保存
- README に起動手順と次ステップを追記

**xincere-review（12/25）**
- システム仕様書作成（構成・運用フロー・macLogger連携・Markdown→HTML変換・deploy.sh 等）
- 週次運用フロー設計：日次ログ収集→Claude Code で週次振り返り→reviews/weekly へ保存→GitHub Pages へ push

### 自動化・効率化

**maclogger（12/23）**
- スクリプト類を scripts/、Python コードを src/ に整理
- Makefile（setup/start/stop/report 等）を追加して操作を簡略化し変更をコミット・push
- 日報自動生成処理を切り出し：generate_report.py / generate_report.sh を追加

**maclogger（12/25）**
- 週次レポート生成スクリプト（generate_weekly_report.py）と Makefile 更新を実装（実行時に権限エラー確認）
- reports構成を整理して出力先を reports/daily に移動

**atoyoro 検証パイプライン（12/24）**
- 検証パイプラインとスクリプトを修正・拡張（manual pattern 生成、complete-test の TARGET_CASE_ID 定数化、動的 weaviate 結果読み込み、analysis_report.md 等の自動出力化）
- npm スクリプトで生成 / 解析を反復（generate:manual → analyzer）
- 出力に summary.csv／pattern_info.txt／estimate_*.csv 等を保存

**スクリプト管理（12/24）**
- package.json のスクリプトやテスト関連ファイルを確認・整備
- E2E テスト用チェックリストを CSV 化（e2e-test-checklist.csv 作成）

### 属人化解消・引き継ぎ準備

**コード整理・構成改善（12/23-24）**
- maclogger のディレクトリ構成を整理（scripts/、src/ に分離）
- index-weaviate.ts から Postgres/Prisma 関連削除（Weaviate のみ動作）
- Git 操作・ワークツリー管理（package.json の scripts マージ・競合解消、PR 作成→マージ→クリーンアップ）

**xincere-review システム設計（12/25）**
- goal-management / xincere-review 周りで、目標分解と週次自動振り返りの骨子を設計
- maclogger / xincere-review / Google Sheets 連携案を固める

---

## 週次目標（Week 16）との照合

### 計画されていた目標

**Be hungry**:
- ❌ **記事8本目の執筆・投稿**：「2025年下半期の学びまとめ（前半戦）」 → 未達成
- ❌ AIドキュメント：Chapter 3「設計フェーズでのAI活用」を執筆 → 未達成

**Be an owner**:
- ❌ GitHub Projectsの年末振り返り、1月・2月の計画を詳細化 → 未達成
- ❌ 週次報告16回目を実施 → 未達成

**Be sustainable**:
- ❌ トラブルシューティングガイド完成 → 未達成
- ❌ 自動化の効果測定結果をまとめる → 未達成
- ❌ 年末の整理（不要なコード削除、ドキュメント更新） → 未達成

### 実際の取り組み

今週は計画していた目標とは異なり、以下のタスクに注力しました：

- **maclogger の開発継続**：Vision OCR 導入、常駐化の運用整備、週次レポート生成機能の実装
- **atoyoro の類似検索精度検証**：Weaviate（ベクトル検索）の全パターン評価（約14,190通り）と改善提案
- **Slack DM 集約ボットの開発**：仕様書作成、開発環境構築、ngrok 経由での動作確認
- **goal-management スキルの開発**：カスタムスキル設計、テンプレート整備
- **xincere-review システムの設計**：週次運用フロー設計、GitHub Pages 連携案の策定

### 目標未達成の理由

- 緊急性の高い開発タスク（maclogger、atoyoro 検証、Slack ボット）を優先したため、計画していた記事執筆やドキュメント完成が後回しになった
- 新規プロジェクト（goal-management、xincere-review）の立ち上げに時間を割いた
- 年末の業務調整や展示会準備など、チーム活動への参加を優先した

---

## 来週の重点課題

### 優先タスク

1. **計画目標の消化**
   - 記事8本目の執筆・投稿（「2025年下半期の学びまとめ（前半戦）」）
   - GitHub Projects の年末振り返り実施
   - 1月・2月の計画を詳細化

2. **maclogger / 週次レポート**
   - generate_weekly_report.py の実行権限修正
   - CI（GitHub Actions）での自動生成パイプライン検証
   - OpenAI/Claude 呼び出し部分の安全性・コスト制御を確認

3. **Slack DM 集約ボット**
   - OAuth の Install フローとトークン保存方針を実装
   - イベント処理のエラーケース（重複・再送・スキーマ変更）への耐性強化

4. **xincere-review / goal-management**
   - profile-builder スキルの初期実装（対話フロー・テンプレートの配置）
   - GitHub Pages へのデプロイ手順（deploy.sh）の作成・テスト

5. **atoyoro / 類似検索改善**
   - ハイブリッド検索（ベクトル＋キーワード）簡易 POC を設計／実装
   - Elasticsearch / Algolia の導入コストと精度想定をチームに提示

---

## 気づき・学び

### 技術面

- **Weaviate 検証の成果**：ベクトル検索単体では見積項目カバレッジ観点で十分な精度が得られないことが明確になった。全組合せの網羅的評価で、キーワード一致ベースの手法やハイブリッド（ベクトル＋キーワード）を導入した方が実務的に有用であることが確認できた
- **実行パイプラインの自動化**：生成→解析→レポート出力を整備できたため、今後別案件での比較検証や定期的な精度評価が容易になった
- **Slack DM 集約ボット**：プロトタイプ（仕様書作成、ngrok経由でのイベント受信、Express→DB保存までの一連動作）を一通り実装・動作確認できた点は大きな前進
- **goal-management / xincere-review**：目標分解と週次自動振り返りの骨子を設計できたため、個人の運用フローと社内展開の基盤が整いつつある

### プロジェクト管理面

- **計画と実績のズレ**：週次目標で計画していたタスク（記事執筆、AIドキュメント、トラブルシューティングガイド等）が未達成となった。緊急性の高い開発タスクを優先した結果、中長期的なアウトプット（記事、ドキュメント）が後回しになる傾向がある
- **優先順位の見直し**：チーム貢献や新規開発も重要だが、半期目標（記事12本、技術書2冊、ドキュメント整備）の達成に向けて、計画的にアウトプット時間を確保する必要がある
- **タスクの並行実行**：複数プロジェクト（maclogger、atoyoro、Slack ボット、xincere-review）を並行して進めたことで、各プロジェクトの進捗は出たが、計画していた完成タスクの完遂率が低下した

### 改善アクション

- **来週は計画目標を優先**：記事8本目の執筆、GitHub Projects 振り返りを最優先で実施
- **アウトプット時間の確保**：開発タスクと並行して、記事執筆やドキュメント作成の時間を明示的にスケジュールする
- **タスクの絞り込み**：複数プロジェクトを並行するのではなく、週ごとに重点プロジェクトを絞って完成度を高める

---

## 総評

今週は maclogger の Vision OCR 導入や Weaviate 検証（全14,190パターン評価）、Slack DM 集約ボットのプロトタイプ実装など、技術面で大きな進捗があった。特に Weaviate 検証では、ベクトル検索単体の限界を明確化し、ハイブリッド検索の必要性を提案できた点は価値が高い。

一方で、週次目標（記事執筆、AIドキュメント、トラブルシューティングガイド等）は全て未達成となった。緊急性の高い開発タスクを優先した結果、中長期的なアウトプット（記事、ドキュメント）が後回しになった。来週は計画目標を優先し、半期目標達成に向けてアウトプット時間を確保する必要がある。

**Be hungry**: 技術学習と新技術適用は活発に行えた（Vision OCR、Playwright、Weaviate 検証、Slack API 学習、Claude Code スキル開発）が、アウトプット（記事執筆）が不足。

**Be an owner**: 開発タスクの完遂とチーム貢献は実施できたが、計画していた GitHub Projects 振り返りや週次報告が未実施。

**Be sustainable**: ドキュメント化と自動化は進んだが、計画していたトラブルシューティングガイド完成や自動化の効果測定は未達成。

来週は計画目標の消化を最優先とし、記事8本目の執筆・投稿、GitHub Projects 振り返り、1月・2月の計画詳細化を実施する。
